import{u as y}from"./useHandleData-DGO0-IdV.js";import{u as V}from"./useAuthButtons-B4KvSUpv.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-Tky8n9Ab.js";import{_ as F}from"./deptDrawer.vue_vue_type_script_setup_true_name_deptDrawer_lang-DaMCKN8S.js";import{a8 as O,a9 as E,d as S,h as k,L as _,b as a,J as m,r as c,F as J,o as A,c as j,w as n,u as o,_ as w,e as s,a0 as v,t as C,$,aR as h}from"./index-nS8LAQjE.js";import{b as q,j as I,c as G,d as x,h as K,i as Q}from"./user-DTiKZ10C.js";import"./sortable.esm-CGHLlJBv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W=()=>O.get(E+"/department/list",{},{cancel:!1}),X={class:"table-box"},Z=S({name:"useProTable"}),de=S({...Z,setup(ee){const D=k(),L=t=>{D.value=t},d=k(),Y=_({type:1}),H=t=>({list:t.list,total:t.total}),N=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),G(e).then(l=>{}),W()},{BUTTONS:R}=V(),U=_([{type:"selection",fixed:"left",width:60},{type:"expand",label:"Expand",width:85},{prop:"name",label:"部门名称",search:{el:"input",tooltip:"我是搜索提示"},render:t=>a(c("el-button"),{type:"primary",link:!0,onClick:()=>m.success("我是通过 tsx 语法渲染的内容")},{default:()=>[t.row.name]})},{prop:"status",label:"部门状态",enum:q,search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},render:t=>a(J,null,[R.value.status?a(c("el-switch"),{"model-value":t.row.status,"active-text":t.row.status?"启用":"禁用","active-value":1,"inactive-value":0,onClick:()=>P(t.row)},null):a(c("el-tag"),{type:t.row.status?"success":"danger"},{default:()=>[t.row.status?"启用":"禁用"]})])},{prop:"createTime",label:"创建时间",headerRender:t=>a(c("el-button"),{type:"primary",onClick:()=>m.success("我是通过 tsx 语法渲染的表头")},{default:()=>[t.column.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"updateTime",label:"修改时间",width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:330}]),z=({newIndex:t,oldIndex:e})=>{var l;(l=d.value)==null||l.tableData,m.success("修改列表排序成功")},g=async t=>{var e;await y(x,{id:[t.id]},`删除【${t.name}】部门`),(e=d.value)==null||e.getTableList()},M=async t=>{var e,l;await y(x,{id:t},"删除所选部门信息"),(e=d.value)==null||e.clearSelection(),(l=d.value)==null||l.getTableList()},P=async t=>{var e;await y(I,{id:t.id,status:t.status==1?0:1},`切换【${t.name}】部门状态`),(e=d.value)==null||e.getTableList()},T=k(null),p=(t,e={})=>{var u,f;const l={title:t,isView:t==="查看",row:{...e},api:t==="新增"?K:t==="编辑"?Q:void 0,getTableList:(u=d.value)==null?void 0:u.getTableList};(f=T.value)==null||f.parentParams(l)};return(t,e)=>{const l=c("el-button"),u=c("el-table-column"),f=c("el-table");return A(),j("div",X,[a(B,{ref_key:"proTable",ref:d,columns:U,"request-api":N,"init-param":Y,"data-callback":H,onDragSort:z},{tableHeader:n(r=>[a(l,{type:"primary",icon:o(w),onClick:e[0]||(e[0]=i=>p("新增"))},{default:n(()=>e[3]||(e[3]=[s("新增部门")])),_:1},8,["icon"]),a(l,{type:"danger",icon:o(v),plain:"",disabled:!r.isSelected,onClick:i=>M(r.selectedListIds)},{default:n(()=>e[4]||(e[4]=[s(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])]),expand:n(r=>[a(f,{ref:"multipleTableRef",data:r.row.children,style:{width:"100%"},"row-key":"id",size:"small","show-header":!1,onSelectionChange:L,border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:n(()=>[a(u,{type:"selection",width:"60"}),a(u,{type:"index",width:"85"}),a(u,{prop:"name",label:"Name"}),a(u,{prop:"status",label:"status"},{default:n(i=>[s(C(i.row.status==1?"启用":"禁用"),1)]),_:1}),a(u,{prop:"createTime",label:"createTime"}),a(u,{prop:"updateTime",label:"updateTime"}),a(u,{label:"操作","min-width":"240"},{default:n(i=>[a(l,{size:"small",type:"primary",link:"",icon:o(w),onClick:b=>p("新增",i.row)},{default:n(()=>e[5]||(e[5]=[s(" 新增 ")])),_:2},1032,["icon","onClick"]),a(l,{size:"small",type:"primary",link:"",icon:o($),onClick:b=>p("编辑",i.row)},{default:n(()=>e[6]||(e[6]=[s("编辑")])),_:2},1032,["icon","onClick"]),a(l,{size:"small",type:"primary",link:"",icon:o(h),onClick:b=>p("查看",i.row)},{default:n(()=>e[7]||(e[7]=[s("查看")])),_:2},1032,["icon","onClick"]),a(l,{size:"small",type:"primary",link:"",icon:o(v),onClick:b=>g(i.row)},{default:n(()=>e[8]||(e[8]=[s("删除")])),_:2},1032,["icon","onClick"])]),_:1})]),_:2},1032,["data"])]),usernameHeader:n(r=>[a(l,{type:"primary",onClick:e[1]||(e[1]=i=>o(m).success("我是通过作用域插槽渲染的表头"))},{default:n(()=>[s(C(r.column.label),1)]),_:2},1024)]),createTime:n(r=>[a(l,{type:"primary",link:"",onClick:e[2]||(e[2]=i=>o(m).success("我是通过作用域插槽渲染的内容"))},{default:n(()=>[s(C(r.row.createTime),1)]),_:2},1024)]),operation:n(r=>[a(l,{type:"primary",link:"",icon:o(w),onClick:i=>p("新增",r.row)},{default:n(()=>e[9]||(e[9]=[s("新增")])),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:o($),onClick:i=>p("编辑",r.row)},{default:n(()=>e[10]||(e[10]=[s("编辑")])),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:o(h),onClick:i=>p("查看",r.row)},{default:n(()=>e[11]||(e[11]=[s("查看")])),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:o(v),onClick:i=>g(r.row)},{default:n(()=>e[12]||(e[12]=[s("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["columns","init-param"]),a(F,{ref_key:"drawerRef",ref:T},null,512)])}}});export{de as default};
