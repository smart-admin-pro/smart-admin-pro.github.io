import{d as g,y as U,h as f,L as b,b as s,r as c,F as h,o as B,c as P,w as i,u as r,_ as R,e as u,a0 as v,aR as J,$ as O,J as V}from"./index-nS8LAQjE.js";import{u as d}from"./useHandleData-DGO0-IdV.js";import{u as A}from"./useAuthButtons-B4KvSUpv.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-Tky8n9Ab.js";import{_ as F}from"./dictDrawer.vue_vue_type_script_setup_true_name_dictDrawer_lang-o7pS80Fb.js";import{b as H,j,d as _,h as q,i as I}from"./user-DTiKZ10C.js";import{b as M}from"./dict-nAt3M3v8.js";import"./sortable.esm-CGHLlJBv.js";import"./plugin-vue_export-helper-DlAUqK2U.js";import"./dict-Cu197DXt.js";const z={class:"table-box"},G=g({name:"useProTable"}),oe=g({...G,setup(K){const T=U(),k=t=>{T.push({name:"dictDataDetail",state:{dictCode:t.dictCode,title:t.name}})},o=f(),w=b({type:1}),y=t=>({list:t.list,total:t.total}),C=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),delete e.createTime,M(e)},{BUTTONS:L}=A(),S=b([{type:"selection",fixed:"left",width:70},{prop:"name",label:"字典名称",search:{el:"input"}},{prop:"dictCode",label:"字典编码",search:{el:"input"}},{prop:"status",label:"状态",enum:H,search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},render:t=>s(h,null,[L.value.status?s(c("el-switch"),{"model-value":t.row.status,"active-text":t.row.status?"启用":"禁用","active-value":1,"inactive-value":0,onClick:()=>N(t.row)},null):s(c("el-tag"),{type:t.row.status?"success":"danger"},{default:()=>[t.row.status?"启用":"禁用"]})])},{prop:"operation",label:"操作",fixed:"right",width:250}]),$=({newIndex:t,oldIndex:e})=>{var a;(a=o.value)==null||a.tableData,V.success("修改列表排序成功")},D=async t=>{var e;await d(_,{id:[t.id]},`删除【${t.name}】字典`),(e=o.value)==null||e.getTableList()},x=async t=>{var e,a;await d(_,{id:t},"删除所选字典信息"),(e=o.value)==null||e.clearSelection(),(a=o.value)==null||a.getTableList()},N=async t=>{var e;await d(j,{id:t.id,status:t.status==1?0:1},`切换【${t.name}】状态`),(e=o.value)==null||e.getTableList()},m=f(null),p=(t,e={})=>{var l,n;const a={title:t,isView:t==="查看",row:{...e},api:t==="新增"?q:t==="编辑"?I:void 0,getTableList:(l=o.value)==null?void 0:l.getTableList};(n=m.value)==null||n.acceptParams(a)};return(t,e)=>{const a=c("el-button");return B(),P("div",z,[s(E,{ref_key:"proTable",ref:o,columns:S,"request-api":C,"init-param":w,"data-callback":y,onDragSort:$},{tableHeader:i(l=>[s(a,{type:"primary",icon:r(R),onClick:e[0]||(e[0]=n=>p("新增"))},{default:i(()=>e[1]||(e[1]=[u("新增")])),_:1},8,["icon"]),s(a,{type:"danger",icon:r(v),plain:"",disabled:!l.isSelected,onClick:n=>x(l.selectedListIds)},{default:i(()=>e[2]||(e[2]=[u(" 批量删除 ")])),_:2},1032,["icon","disabled","onClick"])]),operation:i(l=>[s(a,{type:"primary",link:"",icon:r(J),onClick:n=>k(l.row)},{default:i(()=>e[3]||(e[3]=[u("字典数据")])),_:2},1032,["icon","onClick"]),s(a,{type:"primary",link:"",icon:r(O),onClick:n=>p("编辑",l.row)},{default:i(()=>e[4]||(e[4]=[u("编辑")])),_:2},1032,["icon","onClick"]),s(a,{type:"primary",link:"",icon:r(v),onClick:n=>D(l.row)},{default:i(()=>e[5]||(e[5]=[u("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["columns","init-param"]),s(F,{ref_key:"drawerRef",ref:m},null,512)])}}});export{oe as default};
