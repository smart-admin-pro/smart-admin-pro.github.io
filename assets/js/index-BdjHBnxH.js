import{U as V}from"./Img-t2jbQywE.js";import{d as q,A as P,s as A,h as f,M as K,r as u,o as j,c as N,b as l,w as t,a as d,N as Q,q as H,O as D,n as Z,g as O,P as $,Q as G,R as J,S as W,u as X,T as Y,L as c,e as o}from"./index-nS8LAQjE.js";import{u as h}from"./upload-CoKxYqXZ.js";import{_ as F}from"./plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"upload-box"},le={class:"upload-empty"},te=["src"],ae=["onClick"],ie=["onClick"],oe={class:"el-upload__tip"},se=q({name:"UploadImgs"}),de=q({...se,props:{fileList:{default:()=>[]},api:{},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},limit:{default:5},fileSize:{default:5},fileType:{default:()=>["image/jpeg","image/png","image/gif"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:fileList"],setup(E,{emit:M}){G(a=>({"8b546a3e":a.borderRadius,"62eeec23":a.width,"3dc0c32c":a.height}));const v=E,y=P(J,void 0),x=P(W,void 0),C=A(()=>v.disabled||(y==null?void 0:y.disabled)),g=f(v.fileList);K(()=>v.fileList,a=>{g.value=a});const R=a=>{const s=a.size/1024/1024<v.fileSize,n=v.fileType.includes(a.type);return n||$({title:"温馨提示",message:"上传图片不符合所需的格式！",type:"warning"}),s||setTimeout(()=>{$({title:"温馨提示",message:`上传图片大小不能超过 ${v.fileSize}M！`,type:"warning"})},0),n&&s},B=async a=>{let s=new FormData;s.append("file",a.file);try{const n=v.api??h,{data:L}=await n(s);a.onSuccess(L)}catch(n){a.onError(n)}},r=M,m=(a,s)=>{a&&(s.url=a.fileUrl,r("update:fileList",g.value),x!=null&&x.prop&&(y==null||y.validateField([x.prop])),$({title:"温馨提示",message:"图片上传成功！",type:"success"}))},z=a=>{g.value=g.value.filter(s=>s.url!==a.url||s.name!==a.name),r("update:fileList",g.value)},S=()=>{$({title:"温馨提示",message:"图片上传失败，请您重新上传！",type:"error"})},T=()=>{$({title:"温馨提示",message:`当前最多只能上传 ${v.limit} 张图片，请移除后上传！`,type:"warning"})},e=f(""),U=f(!1),b=a=>{e.value=a.url,U.value=!0};return(a,s)=>{const n=u("el-icon"),L=u("ZoomIn"),p=u("Delete"),w=u("el-upload"),k=u("el-image-viewer");return j(),N("div",ee,[l(w,{"file-list":g.value,"onUpdate:fileList":s[1]||(s[1]=_=>g.value=_),action:"#","list-type":"picture-card",class:Z(["upload",C.value?"disabled":"",a.drag?"no-border":""]),multiple:!0,disabled:C.value,limit:a.limit,"http-request":B,"before-upload":R,"on-exceed":T,"on-success":m,"on-error":S,drag:a.drag,accept:a.fileType.join(",")},{file:t(({file:_})=>[d("img",{src:_.url,class:"upload-image"},null,8,te),d("div",{class:"upload-handle",onClick:s[0]||(s[0]=H(()=>{},["stop"]))},[d("div",{class:"handle-icon",onClick:i=>b(_)},[l(n,null,{default:t(()=>[l(L)]),_:1}),s[3]||(s[3]=d("span",null,"查看",-1))],8,ae),C.value?Q("",!0):(j(),N("div",{key:0,class:"handle-icon",onClick:i=>z(_)},[l(n,null,{default:t(()=>[l(p)]),_:1}),s[4]||(s[4]=d("span",null,"删除",-1))],8,ie))])]),default:t(()=>[d("div",le,[D(a.$slots,"empty",{},()=>[l(n,null,{default:t(()=>[l(X(Y))]),_:1})],!0)])]),_:3},8,["file-list","class","disabled","limit","drag","accept"]),d("div",oe,[D(a.$slots,"tip",{},void 0,!0)]),U.value?(j(),O(k,{key:0,"url-list":[e.value],onClose:s[2]||(s[2]=_=>U.value=!1)},null,8,["url-list"])):Q("",!0)])}}}),I=F(de,[["__scopeId","data-v-5c930775"]]),ue={class:"upload content-box"},re={class:"card img-box"},ne={class:"upload-list"},pe={class:"card img-box"},me={class:"upload-list"},fe={class:"form-box"},ve={class:"card"},ge={class:"card"},be=q({name:"uploadFile"}),ye=q({...be,setup(E){const M=f([{name:"img",url:"https://i.imgtg.com/2023/01/16/QRBHS.jpg"}]),v=f([]),y=f(""),x=f(""),C=f(""),g=f(""),R=f("https://i.imgtg.com/2023/01/16/QRqMK.jpg"),B=c({avatar:[{required:!0,message:"请上传用户头像"}],photo:[{required:!0,message:"请上传用户照片"}],username:[{required:!0,message:"请填写用户姓名"}],idCard:[{required:!0,message:"请填写身份证号"}],email:[{required:!0,message:"请填写邮箱"}]}),r=f({avatar:"",photo:[{name:"img",url:"https://i.imgtg.com/2023/01/16/QR57a.jpg"}],username:"",idCard:"",email:""}),m=f({avatar:"",photo:[{name:"img",url:"https://i.imgtg.com/2023/01/16/QR57a.jpg"}],username:"",idCard:"",email:""}),z=f(),S=()=>{z.value.validate(T=>{})};return(T,e)=>{const U=u("Picture"),b=u("el-icon"),a=u("el-descriptions-item"),s=u("el-descriptions"),n=u("Avatar"),L=u("el-alert"),p=u("el-form-item"),w=u("el-input"),k=u("el-button"),_=u("el-form");return j(),N("div",ue,[d("div",re,[e[23]||(e[23]=d("span",{class:"text"},"多图片上传组件 🍓🍇🍈🍉",-1)),d("div",ne,[l(I,{"file-list":M.value,"onUpdate:fileList":e[0]||(e[0]=i=>M.value=i),drag:!1,"border-radius":"50%"},{empty:t(()=>[l(b,null,{default:t(()=>[l(U)]),_:1}),e[17]||(e[17]=d("span",null,"请上传照片",-1))]),tip:t(()=>e[18]||(e[18]=[o(" 圆形组件，图片最大为 5M（禁止拖拽上传） ")])),_:1},8,["file-list"]),l(I,{"file-list":v.value,"onUpdate:fileList":e[1]||(e[1]=i=>v.value=i),width:"250px"},{empty:t(()=>[l(b,null,{default:t(()=>[l(U)]),_:1}),e[19]||(e[19]=d("span",null,"请上传照片",-1))]),tip:t(()=>e[20]||(e[20]=[o(" 长方形组件（可拖拽上传） ")])),_:1},8,["file-list"])]),l(s,{title:"配置项 📚（其它参数和单图上传组件相同）",column:1,border:""},{default:t(()=>[l(a,{label:"fileList"},{default:t(()=>e[21]||(e[21]=[o(' 双向绑定的 fileList 值，使用示例： v-model:file-list="fileList" ')])),_:1}),l(a,{label:"limit"},{default:t(()=>e[22]||(e[22]=[o(" 最大图片上传数，默认为 5 张 ")])),_:1})]),_:1})]),d("div",pe,[e[40]||(e[40]=d("span",{class:"text"},"单图片上传组件 🍓🍇🍈🍉",-1)),d("div",me,[l(V,{"image-url":y.value,"onUpdate:imageUrl":e[2]||(e[2]=i=>y.value=i),"file-size":3},{tip:t(()=>e[24]||(e[24]=[o(" 上传图片最大为 3M ")])),_:1},8,["image-url"]),l(V,{"image-url":x.value,"onUpdate:imageUrl":e[3]||(e[3]=i=>x.value=i),drag:!1,"border-radius":"50%"},{empty:t(()=>[l(b,null,{default:t(()=>[l(n)]),_:1}),e[25]||(e[25]=d("span",null,"请上传头像",-1))]),tip:t(()=>e[26]||(e[26]=[o(" 圆形组件（禁止拖拽上传） ")])),_:1},8,["image-url"]),l(V,{"image-url":C.value,"onUpdate:imageUrl":e[4]||(e[4]=i=>C.value=i),width:"250px"},{empty:t(()=>[l(b,null,{default:t(()=>[l(U)]),_:1}),e[27]||(e[27]=d("span",null,"请上传 Banner 图",-1))]),tip:t(()=>e[28]||(e[28]=[o(" 长方形组件（可拖拽上传） ")])),_:1},8,["image-url"]),l(V,{"image-url":g.value,"onUpdate:imageUrl":e[5]||(e[5]=i=>g.value=i),disabled:""},{tip:t(()=>e[29]||(e[29]=[o(" 无图（禁用上传） ")])),_:1},8,["image-url"]),l(V,{"image-url":R.value,"onUpdate:imageUrl":e[6]||(e[6]=i=>R.value=i),disabled:""},{tip:t(()=>e[30]||(e[30]=[o(" 有图（禁用编辑、删除） ")])),_:1},8,["image-url"])]),l(s,{title:"配置项 📚",column:1,border:""},{default:t(()=>[l(a,{label:"imageUrl"},{default:t(()=>e[31]||(e[31]=[o(' 双向绑定的 imageUrl 值，使用示例： v-model:image-url="avatar" ')])),_:1}),l(a,{label:"api"},{default:t(()=>e[32]||(e[32]=[o(" 上传图片的 api 方法，一般项目上传都是同一个 api 方法，在组件里直接引入即可（非必传） ")])),_:1}),l(a,{label:"drag"},{default:t(()=>e[33]||(e[33]=[o(" 是否支持拖拽上传图片，默认为 true ")])),_:1}),l(a,{label:"disabled"},{default:t(()=>e[34]||(e[34]=[o(" 是否禁用 上传、删除 功能，可查看图片 ")])),_:1}),l(a,{label:"fileSize"},{default:t(()=>e[35]||(e[35]=[o(" 单个图片文件大小限制，默认为 5M ")])),_:1}),l(a,{label:"fileType"},{default:t(()=>e[36]||(e[36]=[o(' 图片类型限制，默认类型为 ["image/jpeg", "image/png", "image/gif"] ')])),_:1}),l(a,{label:"height"},{default:t(()=>e[37]||(e[37]=[o(' 组件高度样式，默认为 "150px" ')])),_:1}),l(a,{label:"width"},{default:t(()=>e[38]||(e[38]=[o(' 组件宽度样式，默认为 "150px" ')])),_:1}),l(a,{label:"borderRadius"},{default:t(()=>e[39]||(e[39]=[o(' 组件边框圆角样式，默认为 "8px" ')])),_:1})]),_:1})]),d("div",fe,[d("div",ve,[l(L,{title:"图片上传组件在 form 表单中使用，上传之后成功会自动重新校验",type:"warning",effect:"dark",closable:!1,class:"mb20"}),l(_,{ref_key:"ruleFormRef",ref:z,"label-width":"100px","label-suffix":" :",rules:B,model:r.value},{default:t(()=>[l(p,{label:"用户头像",prop:"avatar"},{default:t(()=>[l(V,{"image-url":r.value.avatar,"onUpdate:imageUrl":e[7]||(e[7]=i=>r.value.avatar=i),width:"135px",height:"135px","file-size":3},{empty:t(()=>[l(b,null,{default:t(()=>[l(n)]),_:1}),e[41]||(e[41]=d("span",null,"请上传头像",-1))]),tip:t(()=>e[42]||(e[42]=[o(" 头像大小不能超过 3M ")])),_:1},8,["image-url"])]),_:1}),l(p,{label:"用户照片",prop:"photo"},{default:t(()=>[l(I,{"file-list":r.value.photo,"onUpdate:fileList":e[8]||(e[8]=i=>r.value.photo=i),limit:3,height:"140px",width:"140px","border-radius":"50%"},{empty:t(()=>[l(b,null,{default:t(()=>[l(U)]),_:1}),e[43]||(e[43]=d("span",null,"请上传照片",-1))]),tip:t(()=>e[44]||(e[44]=[o(" 最多上传 3 张照片 ")])),_:1},8,["file-list"])]),_:1}),l(p,{label:"用户姓名",prop:"username"},{default:t(()=>[l(w,{modelValue:r.value.username,"onUpdate:modelValue":e[9]||(e[9]=i=>r.value.username=i),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"身份证号",prop:"idCard"},{default:t(()=>[l(w,{modelValue:r.value.idCard,"onUpdate:modelValue":e[10]||(e[10]=i=>r.value.idCard=i),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"邮箱",prop:"email"},{default:t(()=>[l(w,{modelValue:r.value.email,"onUpdate:modelValue":e[11]||(e[11]=i=>r.value.email=i),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),l(p,null,{default:t(()=>[l(k,null,{default:t(()=>e[45]||(e[45]=[o(" 取消 ")])),_:1}),l(k,{type:"primary",onClick:S},{default:t(()=>e[46]||(e[46]=[o(" 确定 ")])),_:1})]),_:1})]),_:1},8,["rules","model"])]),d("div",ge,[l(L,{title:"图片上传组件在 form 表单中使用，如果该表单禁用，则上传组件会自动禁用",type:"warning",effect:"dark",closable:!1,class:"mb20"}),l(_,{"label-width":"100px","label-suffix":" :",disabled:"",model:m.value},{default:t(()=>[l(p,{label:"用户头像",prop:"avatar"},{default:t(()=>[l(V,{"image-url":m.value.avatar,"onUpdate:imageUrl":e[12]||(e[12]=i=>m.value.avatar=i),width:"135px",height:"135px","file-size":3},{empty:t(()=>[l(b,null,{default:t(()=>[l(n)]),_:1}),e[47]||(e[47]=d("span",null,"请上传头像",-1))]),tip:t(()=>e[48]||(e[48]=[o(" 头像大小不能超过 3M ")])),_:1},8,["image-url"])]),_:1}),l(p,{label:"用户照片",prop:"photo"},{default:t(()=>[l(I,{"file-list":m.value.photo,"onUpdate:fileList":e[13]||(e[13]=i=>m.value.photo=i),height:"140px",width:"140px","border-radius":"50%"},{empty:t(()=>[l(b,null,{default:t(()=>[l(U)]),_:1}),e[49]||(e[49]=d("span",null,"请上传照片",-1))]),tip:t(()=>e[50]||(e[50]=[o(" 照片大小不能超过 5M ")])),_:1},8,["file-list"])]),_:1}),l(p,{label:"用户姓名",prop:"username"},{default:t(()=>[l(w,{modelValue:m.value.username,"onUpdate:modelValue":e[14]||(e[14]=i=>m.value.username=i),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"身份证号",prop:"idCard"},{default:t(()=>[l(w,{modelValue:m.value.idCard,"onUpdate:modelValue":e[15]||(e[15]=i=>m.value.idCard=i),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"邮箱",prop:"email"},{default:t(()=>[l(w,{modelValue:m.value.email,"onUpdate:modelValue":e[16]||(e[16]=i=>m.value.email=i),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),l(p,null,{default:t(()=>[l(k,null,{default:t(()=>e[51]||(e[51]=[o(" 取消 ")])),_:1}),l(k,{type:"primary",onClick:S},{default:t(()=>e[52]||(e[52]=[o(" 确定 ")])),_:1})]),_:1})]),_:1},8,["model"])])])])}}}),Ve=F(ye,[["__scopeId","data-v-8321fd34"]]);export{Ve as default};
